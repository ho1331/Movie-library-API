2021-07-17 11:25:55,037 - Invalid password : 23
2021-07-17 11:26:45,390 - Invalid email : None
2021-07-17 11:27:33,755 - Invalid email : None
2021-07-17 11:28:47,915 - Invalid email : Hjkdk
2021-07-17 11:33:36,395 - Success! Login with nick_name : ввMdtokro13
2021-07-17 11:38:06,090 - Success! Login with nick_name : ввMdtokro13
2021-07-17 11:38:44,702 - Success! Login with nick_name : ввMdtokro13
2021-07-17 11:38:48,898 - User was logout with nick_name : ввMdtokro13
2021-07-17 11:50:55,682 - Success! Login with nick_name : ввMdtokro13
2021-07-17 12:00:39,511 - User was logout with nick_name : ввMdtokro13
2021-07-17 12:01:27,593:DEBUG - Success! Login with nick_name : ввMdtokro13
2021-07-17 12:07:02,408:DEBUG - Success! Login with nick_name : ввMdtokro13
2021-07-17 13:49:51,557:INFO - Success! Login with nick_name : ввMdtokro13
2021-07-17 13:50:00,971:INFO - Success! Login with nick_name : ввMdtokro13
2021-07-17 13:51:07,535:INFO - User was logout with nick_name : ввMdtokro13
2021-07-17 13:51:15,804:DEBUG - FAIL: Invalid password : 3
2021-07-17 13:51:23,715:DEBUG - FAIL: Invalid email : 22
2021-07-17 13:51:28,041:DEBUG - FAIL: Invalid email : 22
2021-07-17 13:51:35,109:INFO - Success! Login with nick_name : ввMdtokro13
2021-07-17 13:53:13,259:INFO - User was logout with nick_name : ввMdtokro13
2021-07-17 13:53:16,790:INFO - SUCCESS! Login with nick_name : ввMdtokro13
2021-07-17 13:53:48,237:INFO - User was logout with nick_name : ввMdtokro13
2021-07-17 13:53:51,970:INFO - SUCCESS: Login with nick_name : ввMdtokro13
2021-07-17 13:58:26,707:ERROR:src.tools.logging - ERROR: bad arguments in json
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "films_poster_key"
DETAIL:  Key (poster)=(ук75d22kffejt255fдfffhddльп) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 94, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 57, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "films_poster_key"
DETAIL:  Key (poster)=(ук75d22kffejt255fдfffhddльп) already exists.

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '2017-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 7.1, 'poster': 'ук75d22kffejt255fдfffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/gkpj)
2021-07-17 14:01:00,673:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "films_poster_key"
DETAIL:  Key (poster)=(ук75d22kffejt255fдfffhddльп) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 94, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 57, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "films_poster_key"
DETAIL:  Key (poster)=(ук75d22kffejt255fдfffhddльп) already exists.

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '2017-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 7.1, 'poster': 'ук75d22kffejt255fдfffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/gkpj)
2021-07-17 14:06:27,342:DEBUG:src.tools.logging - SUCCESS: Created film with parametrs : {'title': 'GHJ', 'release': '2017-3-18', 'description': 'afr оaid in all time', 'rating': 7.1, 'poster': 'ук75d22kffejtf255fдfffhddльп'}
2021-07-17 14:36:34,419:INFO:src.tools.logging - SUCCESS. Deleted film with id : 8
2021-07-17 14:57:11,735:INFO:src.tools.logging - User was logout with nick_name : ввMdtokro13
2021-07-17 15:41:15,561:INFO:src.tools.logging - SUCCESS: Login with nick_name : ввMdtokro13
2021-07-17 16:01:07,550:DEBUG:src.tools.logging - SUCCESS: Created film with parametrs : {'title': 'GHJ', 'release': '2017-3-18', 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75de22kfflpl0ffhddльп'}
2021-07-17 16:01:14,173:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "films_poster_key"
DETAIL:  Key (poster)=(ук75de22kfflpl0ffhddльп) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 60, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "films_poster_key"
DETAIL:  Key (poster)=(ук75de22kfflpl0ffhddльп) already exists.

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '2017-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75de22kfflpl0ffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/gkpj)
2021-07-17 16:04:07,280:DEBUG:src.tools.logging - SUCCESS: Created film with parametrs : {'title': 'GHJ', 'release': '2017-3-18', 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kfflpl0ffhddльп'}
2021-07-17 16:06:50,615:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "2017rrv18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017rrv18...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 60, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.InvalidDatetimeFormat) invalid input syntax for type date: "2017rrv18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017rrv18...
                                                             ^

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '2017rrv18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kgfflpl0ffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/9h9h)
2021-07-17 16:08:06,819:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 52, in create
    Director, name=director[0], sername=director[1]
TypeError: 'int' object is not subscriptable
2021-07-17 16:08:51,819:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 49, in create
    film = Film(**data)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 480, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 477, in _initialize_instance
    return manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 1145, in _declarative_constructor
    setattr(self, k, kwargs[k])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 458, in __set__
    self.impl.set(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1074, in set
    value = self.fire_replace_event(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1082, in fire_replace_event
    value = fn(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/util.py", line 185, in set_
    return validator(state.obj(), key, value)
  File "/app/src/models/films.py", line 36, in validate_rating
    raise AssertionError("field 'rating should be between 1 and 10")
AssertionError: field 'rating should be between 1 and 10
2021-07-17 16:09:26,916:DEBUG:src.tools.logging - SUCCESS: Created film with parametrs : {'title': 'GHJ', 'release': '2017-3-18', 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kgfflpl0ffhddльп'}
2021-07-17 16:09:28,329:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "films_poster_key"
DETAIL:  Key (poster)=(ук75ded22kgfflpl0ffhddльп) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 60, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "films_poster_key"
DETAIL:  Key (poster)=(ук75ded22kgfflpl0ffhddльп) already exists.

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '2017-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kgfflpl0ffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/gkpj)
2021-07-17 16:12:05,480:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "201eee7-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '201eee7-3...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 60, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.InvalidDatetimeFormat) invalid input syntax for type date: "201eee7-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '201eee7-3...
                                                             ^

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '201eee7-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kgfflrpl0ffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/9h9h)
2021-07-17 16:17:34,872:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "201eee7-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '201eee7-3...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 60, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.InvalidDatetimeFormat) invalid input syntax for type date: "201eee7-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '201eee7-3...
                                                             ^

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '201eee7-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kgfflrpl0ffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/9h9h)
2021-07-17 16:17:57,427:DEBUG:src.tools.logging - SUCCESS: Created film with parametrs : {'title': 'GHJ', 'release': '2017-3-18', 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kgfflrpl0ffhddльп'}
2021-07-17 16:18:34,484:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "2017e-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017e-3-1...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 60, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.InvalidDatetimeFormat) invalid input syntax for type date: "2017e-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017e-3-1...
                                                             ^

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '2017e-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kfgfflrpl0ffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/9h9h)
2021-07-17 16:18:47,416:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "2017e-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017e-3-1...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 60, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.InvalidDatetimeFormat) invalid input syntax for type date: "2017e-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017e-3-1...
                                                             ^

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '2017e-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kfgfflrpl0ffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/9h9h)
2021-07-17 16:18:50,247:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "2017e-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017e-3-1...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 60, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.InvalidDatetimeFormat) invalid input syntax for type date: "2017e-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017e-3-1...
                                                             ^

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '2017e-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kfgfflrpl0ffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/9h9h)
2021-07-17 16:19:13,212:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "2017e-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017e-3-1...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 60, in create
    new_genre = Film.get_or_crete(Genre, genre=genre)
  File "/app/src/models/base.py", line 27, in get_or_crete
    instance = model.query.filter_by(**kwargs).first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2760, in first
    return self.limit(1)._iter().first()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2844, in _iter
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1637, in execute
    ) = compile_state_cls.orm_pre_session_exec(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 289, in orm_pre_session_exec
    session._autoflush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2204, in _autoflush
    util.raise_(e, with_traceback=sys.exc_info()[2])
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2193, in _autoflush
    self.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3298, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3438, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 3398, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 242, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1219, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.InvalidDatetimeFormat) invalid input syntax for type date: "2017e-3-18"
LINE 1: ...cription, rating, poster, user_id) VALUES ('GHJ', '2017e-3-1...
                                                             ^

[SQL: INSERT INTO films (title, release, director_id, description, rating, poster, user_id) VALUES (%(title)s, %(release)s, %(director_id)s, %(description)s, %(rating)s, %(poster)s, %(user_id)s) RETURNING films.id]
[parameters: {'title': 'GHJ', 'release': '2017e-3-18', 'director_id': 35, 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded22kfgfflrpl0ffhddльп', 'user_id': 62}]
(Background on this error at: http://sqlalche.me/e/14/9h9h)
2021-07-17 16:19:36,987:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 87, in post
    film = Film.create(request_json)
  File "/app/src/models/films.py", line 58, in create
    for genre in genr:
TypeError: 'int' object is not iterable
2021-07-17 16:47:37,186:INFO:src.tools.logging - SUCCESS. Deleted film with id : 19
2021-07-17 16:48:19,272:INFO:src.tools.logging - SUCCESS. Updated film with id : 6
2021-07-17 16:48:24,421:INFO:src.tools.logging - SUCCESS. Updated film with id : 6
2021-07-17 16:48:34,853:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "20jk17-3-18"
LINE 1: UPDATE films SET title='Pddkdoka', release='20jk17-3-18', de...
                                                   ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 289, in patch
    Film.query.filter_by(id=id).update(request_json)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 3219, in update
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1689, in execute
    result = conn._execute_20(statement, params or {}, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidDatetimeFormat) invalid input syntax for type date: "20jk17-3-18"
LINE 1: UPDATE films SET title='Pddkdoka', release='20jk17-3-18', de...
                                                   ^

[SQL: UPDATE films SET title=%(title)s, release=%(release)s, description=%(description)s, rating=%(rating)s, poster=%(poster)s WHERE films.id = %(id_1)s]
[parameters: {'title': 'Pddkdoka', 'release': '20jk17-3-18', 'description': '41111111111111111!!!!!!!!!!!!', 'rating': 1.1, 'poster': 'qe1fвkr34cc5', 'id_1': 6}]
(Background on this error at: http://sqlalche.me/e/14/9h9h)
2021-07-17 16:48:42,256:INFO:src.tools.logging - SUCCESS. Updated film with id : 6
2021-07-17 16:48:50,110:INFO:src.tools.logging - User was logout with nick_name : ввMdtokro13
2021-07-17 16:49:35,445:DEBUG:src.tools.logging - SUCCESS: Created user with parametrs : {'name': 'Moko', 'nick_name': 'ввMdtkokro13', 'email': '8', 'password': '8'}
2021-07-17 16:49:48,997:INFO:src.tools.logging - SUCCESS: Login with nick_name : ввMdtkokro13
2021-07-17 16:49:54,886:DEBUG:src.tools.logging - FAIL. Not enough permissions to access. BAD user_id : 6
2021-07-17 17:24:18,271:DEBUG:src.tools.logging - FAIL. Not enough permissions to access : only admin
2021-07-17 17:24:32,155:INFO:src.tools.logging - SUCCESS: Login with nick_name : ввMdtokro13
2021-07-17 17:24:37,716:INFO:src.tools.logging - SUCCESS. Deleted director with id : 14
2021-07-17 17:38:33,639:INFO:src.tools.logging - SUCCESS. Updated film with id : 6
2021-07-17 17:39:19,673:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "201ee7-3-18"
LINE 1: UPDATE films SET title='Pddkdoka', release='201ee7-3-18', de...
                                                   ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 289, in patch
    Film.patch(id,film,request_json)
  File "/app/src/models/films.py", line 80, in patch
    Film.query.filter_by(id=id).update(data)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 3219, in update
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1689, in execute
    result = conn._execute_20(statement, params or {}, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidDatetimeFormat) invalid input syntax for type date: "201ee7-3-18"
LINE 1: UPDATE films SET title='Pddkdoka', release='201ee7-3-18', de...
                                                   ^

[SQL: UPDATE films SET title=%(title)s, release=%(release)s, description=%(description)s, rating=%(rating)s, poster=%(poster)s WHERE films.id = %(id_1)s]
[parameters: {'title': 'Pddkdoka', 'release': '201ee7-3-18', 'description': '41111111111d111111!!!!!!!!!!!!', 'rating': 1.1, 'poster': 'qe1fвkr3f4cc5', 'id_1': 6}]
(Background on this error at: http://sqlalche.me/e/14/9h9h)
2021-07-17 17:39:29,487:ERROR:src.tools.logging - ERROR: bad arguments in request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.CheckViolation: new row for relation "films" violates check constraint "rating_check"
DETAIL:  Failing row contains (6, Pddkdoka, 2017-03-18, 34, 41111111111d111111!!!!!!!!!!!!, 12.1, qe1fвkr3f4cc5, 19).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/views/films_views.py", line 289, in patch
    Film.patch(id,film,request_json)
  File "/app/src/models/films.py", line 80, in patch
    Film.query.filter_by(id=id).update(data)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 3219, in update
    result = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1689, in execute
    result = conn._execute_20(statement, params or {}, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1582, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 323, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1451, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1813, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1994, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1770, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.CheckViolation) new row for relation "films" violates check constraint "rating_check"
DETAIL:  Failing row contains (6, Pddkdoka, 2017-03-18, 34, 41111111111d111111!!!!!!!!!!!!, 12.1, qe1fвkr3f4cc5, 19).

[SQL: UPDATE films SET title=%(title)s, release=%(release)s, description=%(description)s, rating=%(rating)s, poster=%(poster)s WHERE films.id = %(id_1)s]
[parameters: {'title': 'Pddkdoka', 'release': '2017-3-18', 'description': '41111111111d111111!!!!!!!!!!!!', 'rating': 12.1, 'poster': 'qe1fвkr3f4cc5', 'id_1': 6}]
(Background on this error at: http://sqlalche.me/e/14/gkpj)
2021-07-17 17:40:09,934:INFO:src.tools.logging - SUCCESS: Login with nick_name : ввMdtkokro13
2021-07-17 17:40:14,088:DEBUG:src.tools.logging - FAIL. Not enough permissions to access. BAD user_id : 6
2021-07-17 17:40:32,689:DEBUG:src.tools.logging - FAIL. Not enough permissions to access. BAD user_id : 6
2021-07-17 17:40:41,050:INFO:src.tools.logging - SUCCESS: Login with nick_name : ввMdtokro13
2021-07-17 17:41:17,119:INFO:src.tools.logging - SUCCESS. Updated film with id : 9
2021-07-17 17:45:24,169:INFO:src.tools.logging - SUCCESS. Deleted film with id : 9
2021-07-17 17:45:41,276:INFO:src.tools.logging - SUCCESS: Login with nick_name : ввMdtkokro13
2021-07-17 17:45:48,041:DEBUG:src.tools.logging - FAIL. Not enough permissions to access (explaine: film.user_id==user.id : 15 != 63
2021-07-17 21:32:41,544:DEBUG:src.tools.logging - SUCCESS: Created film with parametrs : {'title': 'GHJ', 'release': '2017-3-18', 'description': 'afr оaid in all time', 'rating': 6.1, 'poster': 'ук75ded2hj2kdgfflrpl0ffhddльп'}
2021-07-17 21:32:57,931:DEBUG:src.tools.logging - FAIL. Not enough permissions to access (explaine: film.user_id==user.id : 2 != 63
